#pragma once

const char home_html[] PROGMEM = R"rawliteral(
<!DOCTYPE html>
<html lang=\"en\">

<head>
  <meta name=\"viewport\" charset="UTF-8" content=\"width=device-width, initial-scale=1, user-scalable=no\" />
  <title>%title%</title>
  <link rel="stylesheet" href="/style.css">
  <script>

  window.onload = function() {
    initWebSocket();

  }
    function sendCommand(cmd) {
    console.log("Command:", cmd);
    // Example: send to device via HTTP
    fetch('/control', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ command: cmd })
    })
    .then(res => res.text())
    .then(txt => console.log("Response:", txt))
    .catch(err => console.error("Error:", err));
  }
  function initWebSocket() {
    const socket = new WebSocket('ws://' + window.location.hostname + '/ws_home');
    socket.onmessage = function(event) {
      const stateVal = JSON.parse(event.data);
      var modeButton = document.getElementById('Mode')
      if (modeButton) {
        modeButton.innerHTML = stateVal.mode;
        var color = stateVal.element === true ? "#ef4444" : "#3b82f6";
        modeButton.style.backgroundColor = color;
      }
      document.getElementById('TargetTemperature').innerHTML = "Target Temperature: " + stateVal.target_temperature;
      document.getElementById('Temperature').innerHTML = "Temperature: " + stateVal.temperature  + "Â°C";
    };
    socket.onerror = function(error) {
      console.error('WebSocket error:', error);
    };
    window.addEventListener('beforeunload', function() { if (socket) { socket.close(); } });
  }
  </script>
</head>

<body>
  <div id="home">
    <div id="hdr">
      <h2>%title%</h2>
      <div style='font-size: .6em;'>Firmware config version '%version%'</div>
      <hr>
      <div class="state">
        <button class="heat" id="Mode" onclick="sendCommand('heat')">Heat</button>
        <button class="up"    onclick="sendCommand('up')">+</button>
        <button class="down"  onclick="sendCommand('down')">-</button>
      </div>
      <p><div class="state_box" id="Temperature"> </div></p>
      <p><div class="state_box" id="TargetTemperature"> </div></p>
      <div class="link-row">
        <p><a href='settings'>Settings</a></p>
        <p><a href='/log' target='_blank'>Web Log</a></p>
      </div>
    </div>
  </div>
</body>

</html>
)rawliteral";